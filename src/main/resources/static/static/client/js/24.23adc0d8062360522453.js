webpackJsonp([24],{vvVP:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("vLgD"),n=i("RAp7"),s={name:"bulletin",mixins:[n.a],data:function(){return{activeName:"first",total:0,lists:[],pageSizes:[10,30,50,100],listQuery:{page:1,limit:10,offset:0,isSystem:1,isUsed:1}}},created:function(){this.getList()},methods:{getList:function(t){var e=this;t&&(e.listQuery.page=1,e.listQuery.offset=0),e.listQuery.offset=(e.listQuery.page-1)*e.listQuery.limit,Object(a.a)("sys/notify/list",e.listQuery).then(function(t){e.lists=t.rows,e.total=t.total,setTimeout(function(){e.navHeight(2)},100)}).catch(function(){})},navHeight:function(t){t||(t=1),setTimeout(function(){var e=$(".grid-content .item-"+t).height();$(".el-tabs__nav").css("min-height",e+20)},100)}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),t._v(" "),i("div",[i("el-table",{attrs:{data:t.lists}},[i("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),t._v(" "),i("el-table-column",{attrs:{label:"标题",prop:"title",width:"160","show-overflow-tooltip":!0}}),t._v(" "),i("el-table-column",{attrs:{label:"消息内容",prop:"content","show-overflow-tooltip":!0}}),t._v(" "),i("el-table-column",{attrs:{label:"时间",width:"170",prop:"createtime"}})],1),t._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-size":t.listQuery.limit,"page-sizes":t.pageSizes,total:t.total,background:"",layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tab-pane-header"},[e("b",[this._v("平台公告")])])}]},o=i("VU/8")(s,l,!1,null,null,null).exports,c=i("X2Oc"),r={name:"index",mixins:[n.a],components:{"sys-bulletin":o},data:function(){return{activeName:"first",total:0,lists:[],pageSizes:[10,30,50,100],listQuery:{page:1,limit:10,offset:0,isSystem:0},isRemove:!1}},created:function(){this.getList(),2==Object(c.j)("id")&&(this.activeName="second")},mounted:function(){var t=this;setTimeout(function(){t.navHeight()},100)},methods:{del:function(t){var e=this,i={},n="sys/notify/remove";if(t)i.id=t;else{n="sys/notify/batchRemove";var s=e.multipleSelection.map(function(t){return t.id});if(s.length<1)return void e.R("请选择要删除的数据!");i.ids=s.toString()}e.$confirm("您确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.b)(n,i).then(function(t){e.getList()}).catch(function(){})}).catch(function(){})},getList:function(t){var e=this;t&&(e.listQuery.page=1,e.listQuery.offset=0),e.listQuery.offset=(e.listQuery.page-1)*e.listQuery.limit,Object(a.a)("sys/notify/list",e.listQuery).then(function(t){e.lists=t.rows,e.total=t.total,e.$nextTick(function(){var t=$(".el-tab-pane:visible").attr("data-id");e.navHeight(t)})}).catch(function(){})},h:function(t){var e=$(t.$el).attr("data-id");this.navHeight(e)},navHeight:function(t){t||(t=1),setTimeout(function(){var e=$(".grid-content .item-"+t).height();$(".el-tabs__nav").css("min-height",e+20)},100)}},watch:{activeName:function(){this.$nextTick(function(){var t=$(".el-tab-pane:visible").attr("data-id");this.navHeight(t)})}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bgw sys-message"},[i("div",{staticClass:"grid-content",staticStyle:{padding:"20px 0"}},[i("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":t.h},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{staticClass:"item-1",attrs:{name:"first","data-id":"1",label:"消息通知"}},[i("div",{staticClass:"tab-pane-header"},[i("b",[t._v("消息通知")]),t._v(" "),i("div",{staticClass:"fr"},[i("a",{staticClass:"color cp",on:{click:function(e){t.isRemove=!0}}},[t._v("编辑")]),t._v(" "),t.isRemove?i("a",{staticClass:"color cp",on:{click:function(e){return t.del()}}},[t._v("批量删除")]):t._e()])]),t._v(" "),i("div",[i("el-table",{attrs:{data:t.lists},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),t._v(" "),i("el-table-column",{attrs:{label:"消息内容",prop:"title"}}),t._v(" "),i("el-table-column",{attrs:{label:"时间",fixed:"right",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{"padding-right":"10px"}},[i("span",[t._v(t._s(e.row.createtime))]),t._v(" "),t.isRemove?i("i",{staticClass:"fr el-icon-delete-solid cp",staticStyle:{"margin-top":"4px"},on:{click:function(i){return t.del(e.row.id)}}}):t._e()])]}}])})],1),t._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-size":t.listQuery.limit,"page-sizes":t.pageSizes,total:t.total,background:"",layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1)]),t._v(" "),i("el-tab-pane",{staticClass:"item-2",attrs:{name:"second","data-id":"2",label:"平台公告"}},[i("sys-bulletin")],1)],1)],1)])},staticRenderFns:[]},d=i("VU/8")(r,u,!1,null,null,null);e.default=d.exports}});