webpackJsonp([31],{ENTg:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l("gRE1"),a=l.n(i),s=l("vLgD"),n=l("7biW"),r=l("RAp7"),o=l("X2Oc"),c={name:"receipt",mixins:[r.a],components:{"search-area":n.a},data:function(){return{defTag:"phone,content,receiptCode",total:0,lists:[],pageSizes:[10,30,50,100],listQuery:{page:1,limit:10,offset:0,starttime:"",endtime:"",pdType:1,json:"[]"}}},created:function(){this.getList()},methods:{theadChange:function(e){this.listQuery.receiptStatus=a()(e)[0][0],this.getList(1)},exportFile:function(){if(this.total>1e5)this.R("最多可导出10万,请重新筛选");else{var e=Object(o.s)(this.listQuery);window.open("/trigmsg/log/receipt/export?"+e)}},getList:function(e){var t=this;e&&(t.listQuery.page=1,t.listQuery.offset=0),t.listQuery.offset=(t.listQuery.page-1)*t.listQuery.limit,Object(s.a)("trigmsg/log/list",t.listQuery).then(function(e){t.lists=e.rows,t.total=e.total}).catch(function(){})},reset:function(){this.listQuery.id="",this.listQuery.sendStatus="",this.listQuery.content="",this.listQuery.phone="",this.resetTime()},resetTime:function(){var e=new Date,t=Object(o.e)(e,"yyyy/MM/dd"),l=new Date;l.setTime(l.getTime());var i=Object(o.e)(l,"yyyy/MM/dd")+" 00:00:00",a=t+" 23:59:59";this.listQuery.starttime=i,this.listQuery.endtime=a,this.datePickerVal=[new Date(i),new Date(a)]}}},p={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"bgw p2"},[l("div",{staticClass:"query"},[l("el-form",{attrs:{inline:!0,model:e.listQuery,size:"mini","label-width":"70px","label-position":"left"}},[l("el-form-item",{attrs:{label:"任务ID"}},[l("el-input",{attrs:{placeholder:"任务ID"},model:{value:e.listQuery.id,callback:function(t){e.$set(e.listQuery,"id",t)},expression:"listQuery.id"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"手机号"}},[l("el-input",{attrs:{placeholder:"任务ID"},model:{value:e.listQuery.phone,callback:function(t){e.$set(e.listQuery,"phone",t)},expression:"listQuery.phone"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"下发状态"}},[l("el-select",{attrs:{placeholder:"下发状态"},model:{value:e.listQuery.sendStatus,callback:function(t){e.$set(e.listQuery,"sendStatus",t)},expression:"listQuery.sendStatus"}},[l("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),l("el-option",{attrs:{label:"未激活",value:"0"}}),e._v(" "),l("el-option",{attrs:{label:"成功",value:"1"}}),e._v(" "),l("el-option",{attrs:{label:"处理中",value:"2"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"内容"}},[l("el-input",{staticStyle:{width:"300%"},attrs:{placeholder:"内容"},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"下发时间"}},[l("el-date-picker",{attrs:{"popper-class":"veesing-date-picker",editable:!1,clearable:!1,type:"datetimerange",format:"yyyy/MM/dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"picker-options":e.pickerOptions},on:{change:function(t){return e.createTime()}},model:{value:e.datePickerVal,callback:function(t){e.datePickerVal=t},expression:"datePickerVal"}})],1),e._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.getList}},[e._v("查询")]),e._v(" "),l("el-button",{on:{click:e.reset}},[e._v("重置")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.exportFile}},[e._v("导出")])],1)],1)],1),e._v(" "),l("el-table",{attrs:{data:e.lists},on:{"filter-change":e.theadChange}},[l("el-table-column",{attrs:{label:"任务ID",prop:"id","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"号码",prop:"phone","min-width":"140",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"短信内容",prop:"content","show-overflow-tooltip":!0,"min-width":"200",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"发送时间",prop:"sendTime","min-width":"170",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"发送状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.sendStatus?l("span",{staticClass:"point point-error"},[e._v("未激活")]):1===t.row.sendStatus?l("span",{staticClass:"point point-success"},[e._v("成功")]):l("span",{staticClass:"point point-info"},[e._v("处理中")])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"回执时间",prop:"receiptTime","min-width":"170",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"回执状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.receiptStatus?l("span",{staticClass:"point point-error"},[e._v("失败")]):1===t.row.receiptStatus?l("span",{staticClass:"point point-success"},[e._v("成功")]):l("span",{staticClass:"point point-info"},[e._v("未知")])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"回执码",prop:"receiptCode","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"推送时间",prop:"pushTime","min-width":"170",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"推送结果",prop:"pushResult","min-width":"100","show-overflow-tooltip":!0}})],1),e._v(" "),l("div",{staticClass:"pagination-container"},[l("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-size":e.listQuery.limit,"page-sizes":e.pageSizes,total:e.total,background:"",layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)},staticRenderFns:[]},u=l("VU/8")(c,p,!1,null,null,null);t.default=u.exports}});