webpackJsonp([18],{HutH:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),l=i("vLgD"),r=i("X2Oc"),u={inject:["reload"],name:"security",props:["isSecondary"],data:function(){return{maximum:"",remaining:"",dailyMaximum:"",phone:"",qrcode:""}},created:function(){var e=this;Object(l.a)("sys/security/list",{pdType:7},"string").then(function(t){var i=JSON.parse(t);e.maximum=i["每天最大发送量"],e.remaining=i["剩余条数提醒"],e.dailyMaximum=i["单个手机号每日最大发送量"],e.phone=i["账户预警通知手机号"];var a=i["微信公众号"].value;a&&null!=a&&"未设置"!=a?e.qrcode=a.split(",")[0]:e.isSecondary&&Object(l.a)("sys/security/qrcode").then(function(t){e.qrcode=t.msg}).catch(function(t){e.qrcode=""})}).catch(function(e){})},methods:{onSubmit:function(){var e=this,t=[],i=/(^[0-9]\d*$)/;if(!i.test(e.maximum.value)||!i.test(e.remaining.value)||!i.test(e.dailyMaximum.value))return e.R("数量只能为正整数！"),!1;var a=e.phone.value.split(",");if(a.length>8)return e.R("手机号最多添加8个！"),!1;for(var u=0;u<a.length;u++)if(!Object(r.l)(a[u]))return e.R("请输入正确的手机号码！"),!1;t.push({id:e.maximum.id,value:e.maximum.value}),t.push({id:e.remaining.id,value:e.remaining.value}),t.push({id:e.dailyMaximum.id,value:e.dailyMaximum.value}),t.push({id:e.phone.id,value:e.phone.value}),Object(l.b)("sys/security/update",{json:n()(t)}).then(function(t){e.reload()}).catch(function(e){})}}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bgw p2"},[i("el-form",{staticStyle:{width:"80%",margin:"0 auto","margin-top":"40px"},attrs:{"label-width":"180px"}},[i("el-form-item",{attrs:{label:"每天最大发送量"}},[i("el-input",{attrs:{type:"number"},model:{value:e.maximum.value,callback:function(t){e.$set(e.maximum,"value","string"==typeof t?t.trim():t)},expression:"maximum.value"}}),e._v(" "),i("p",{staticClass:"info",staticStyle:{"line-height":"initial","margin-top":"10px"}},[e._v("\n        值为0时将不作限制。 "),i("br"),e._v("\n        当天短信发送到达此数值时，系统暂停发送短信，第二天0点自动重启发送 。"),i("br"),e._v("\n        超限后，您可随时调整该数值重启发送。\n      ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"剩余条数提醒"}},[i("el-input",{attrs:{type:"number"},model:{value:e.remaining.value,callback:function(t){e.$set(e.remaining,"value","string"==typeof t?t.trim():t)},expression:"remaining.value"}}),e._v(" "),i("p",{staticClass:"info",staticStyle:{"line-height":"initial","margin-top":"10px"}},[e._v("\n        默认值3000条。"),i("br"),e._v("\n        短信剩余条数低于此值触发提醒，每天提醒一次，充值超出此值后不再提醒；建议设置成每天发送数的5倍。\n      ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"单个手机号每日最大发送量"}},[i("el-input",{attrs:{type:"number"},model:{value:e.dailyMaximum.value,callback:function(t){e.$set(e.dailyMaximum,"value","string"==typeof t?t.trim():t)},expression:"dailyMaximum.value"}}),e._v(" "),i("p",{staticClass:"info",staticStyle:{"line-height":"initial","margin-top":"10px"}},[e._v("\n        值为0时将不作限制，默认值5条。"),i("br"),e._v("\n        为避免重复发送造成资源浪费，设置单个手机号每日最大发送量，超出设置值后，不再给重复发送的手机号发送短信，您可随时调整该数值允许发送。\n      ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"账户预警通知手机号"}},[i("el-input",{model:{value:e.phone.value,callback:function(t){e.$set(e.phone,"value","string"==typeof t?t.trim():t)},expression:"phone.value"}}),e._v(" "),i("p",{staticClass:"info",staticStyle:{"line-height":"initial","margin-top":"10px"}},[e._v("\n        默认为当前账户手机号。"),i("br"),e._v("\n        多个手机号码，请用逗号隔开，手机号数字之间请勿加空格,最多八个\n      ")])],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){return e.reload()}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]},s=i("VU/8")(u,m,!1,null,null,null);t.default=s.exports}});