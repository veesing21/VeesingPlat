webpackJsonp([19],{"1WeU":function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=l("gRE1"),i=l.n(a),s=l("vLgD"),n=l("7biW"),r=l("RAp7"),o=l("X2Oc"),c={name:"receipt",mixins:[r.a],components:{"search-area":n.a},data:function(){return{searchData:[{type:"phone",show:!0,name:"手机号码"},{type:"title",show:!0,name:"彩信标题"},{type:"receiptCode",show:!0,name:"回执状态码"}],defTag:"phone,title,receiptCode",total:0,lists:[],pageSizes:[10,30,50,100],listQuery:{page:1,limit:10,offset:0,starttime:"",endtime:"",pdType:7,json:"[]",batchId:"",phone:"",title:"",sendStatus:""}}},created:function(){var t=this.$route.query.taskId;t&&(this.listQuery.batchId=t),this.getList()},methods:{theadChange:function(t){this.listQuery.receiptStatus=i()(t)[0][0],this.getList(1)},exportFile:function(){if(this.total>10)this.R("最大可导出100000,请重新筛选");else{var t=Object(o.s)(this.listQuery);window.open("/mms/log/receipt/export?"+t)}},getList:function(t){var e=this;t&&(e.listQuery.page=1,e.listQuery.offset=0),e.listQuery.offset=(e.listQuery.page-1)*e.listQuery.limit,Object(s.a)("mms/log/receipt/list",e.listQuery).then(function(t){e.lists=t.rows,e.total=t.total}).catch(function(){})},reset:function(){this.listQuery.batchId="",this.listQuery.sendStatus="",this.listQuery.title="",this.listQuery.phone="",this.resetTime()},resetTime:function(){var t=new Date,e=Object(o.e)(t,"yyyy/MM/dd"),l=new Date;l.setTime(l.getTime());var a=Object(o.e)(l,"yyyy/MM/dd")+" 00:00:00",i=e+" 23:59:59";this.listQuery.starttime=a,this.listQuery.endtime=i,this.datePickerVal=[new Date(a),new Date(i)]}}},p={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"bgw p2"},[l("div",{staticClass:"query"},[l("el-form",{attrs:{inline:!0,model:t.listQuery,size:"mini","label-width":"70px","label-position":"left"}},[l("el-form-item",{attrs:{label:"任务ID"}},[l("el-input",{attrs:{placeholder:"任务ID"},model:{value:t.listQuery.batchId,callback:function(e){t.$set(t.listQuery,"batchId",e)},expression:"listQuery.batchId"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"手机号"}},[l("el-input",{attrs:{placeholder:"任务ID"},model:{value:t.listQuery.phone,callback:function(e){t.$set(t.listQuery,"phone",e)},expression:"listQuery.phone"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"下发状态"}},[l("el-select",{attrs:{placeholder:"下发状态"},model:{value:t.listQuery.sendStatus,callback:function(e){t.$set(t.listQuery,"sendStatus",e)},expression:"listQuery.sendStatus"}},[l("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),l("el-option",{attrs:{label:"未激活",value:"0"}}),t._v(" "),l("el-option",{attrs:{label:"成功",value:"1"}}),t._v(" "),l("el-option",{attrs:{label:"处理中",value:"2"}})],1)],1),t._v(" "),l("el-form-item",{attrs:{label:"标题"}},[l("el-input",{attrs:{placeholder:"标题"},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"下发时间"}},[l("el-date-picker",{attrs:{"popper-class":"veesing-date-picker",editable:!1,clearable:!1,type:"datetimerange",format:"yyyy/MM/dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"picker-options":t.pickerOptions},on:{change:function(e){return t.createTime()}},model:{value:t.datePickerVal,callback:function(e){t.datePickerVal=e},expression:"datePickerVal"}})],1),t._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:t.getList}},[t._v("查询")]),t._v(" "),l("el-button",{on:{click:t.reset}},[t._v("重置")]),t._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:t.exportFile}},[t._v("导出")])],1)],1)],1),t._v(" "),l("el-table",{attrs:{data:t.lists},on:{"filter-change":t.theadChange}},[l("el-table-column",{attrs:{label:"任务ID",prop:"batchId",width:"100"}}),t._v(" "),l("el-table-column",{attrs:{label:"号码",prop:"phone",width:"140"}}),t._v(" "),l("el-table-column",{attrs:{label:"归属",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.provinceCity)+"\n        "),0===e.row.numSection?l("span",[t._v("错号")]):t._e(),t._v(" "),1===e.row.numSection?l("span",[t._v("移动")]):t._e(),t._v(" "),2===e.row.numSection?l("span",[t._v("联通")]):t._e(),t._v(" "),3===e.row.numSection?l("span",[t._v("电信")]):t._e()]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"标题",prop:"title","show-overflow-tooltip":!0,"min-width":"200"}}),t._v(" "),l("el-table-column",{attrs:{label:"下发时间",prop:"sendTime","min-width":"200"}}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:"下发状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("p",[0===e.row.sendStatus?l("span",{staticClass:"point point-error"},[t._v("未激活")]):1===e.row.sendStatus?l("span",{staticClass:"point point-success"},[t._v("成功")]):l("span",{staticClass:"point point-info"},[t._v("处理中")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:"回执状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("p",[0==e.row.receiptStatus?l("span",{staticClass:"point point-error"},[t._v("失败")]):1==e.row.receiptStatus?l("span",{staticClass:"point point-success"},[t._v("成功")]):l("span",{staticClass:"point point-info"},[t._v("等待")])])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"回执时间",prop:"receiptTime","min-width":"200"}}),t._v(" "),l("el-table-column",{attrs:{label:"回执码",prop:"receiptCode","min-width":"100"}}),t._v(" "),l("el-table-column",{attrs:{label:"推送时间",prop:"pushTime","min-width":"170"}}),t._v(" "),l("el-table-column",{attrs:{label:"推送结果",prop:"pushResult","min-width":"100","show-overflow-tooltip":!0}})],1),t._v(" "),l("div",{staticClass:"pagination-container"},[l("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-size":t.listQuery.limit,"page-sizes":t.pageSizes,total:t.total,background:"",layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1)},staticRenderFns:[]},u=l("VU/8")(c,p,!1,null,null,null);e.default=u.exports}});