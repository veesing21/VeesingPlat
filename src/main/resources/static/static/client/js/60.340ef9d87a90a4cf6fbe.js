webpackJsonp([60],{"M7/5":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("vLgD"),s=i("7biW"),n=i("RAp7"),o=(i("X2Oc"),{name:"payList",mixins:[n.a],components:{"search-area":s.a},data:function(){return{noTime:!0,productType:[],searchData:[{type:"ordernumbers",show:!0,name:"订单号"},{type:"record",name:"充值产品",show:!0,value:""},{type:"state",name:"交易状态",show:!0,value:[{name:"支付失败",value:"0"},{name:"支付成功",value:"1"},{name:"待支付",value:"2"}]},{type:"type",name:"支付方式",show:!0,value:[{name:"线下充值",value:"1"},{name:"支付宝充值",value:"2"},{name:"微信充值",value:"3"}]}],defTag:"ordernumbers",total:0,lists:[],pageSizes:[10,30,50,100],listQuery:{page:1,limit:10,offset:0,record:"",type:"",state:"",starttime:"",endtime:""},item:"",dialogDetail:!1,dialogInvoice:!1,telphoneType:1,addressType:1,invoiceInfo:{rid:"",ordernumber:"",type:2,money:0,rise:"",address:"",telphone:"",openbank:"",renumber:"",account:"",invoicestate:2}}},created:function(){var e=this;e.getList(),Object(a.a)("cusPackageSpec/productType/list").then(function(t){for(var i=t.length,a=[],s=0;s<i;s++){var n={};n.name=t[s].name,n.value=t[s].name,a.push(n)}e.searchData[1].value=a}).catch(function(){})},methods:{submit:function(){var e=this,t=e.invoiceInfo;1!=t.type||t.renumber&&t.openbank&&t.account?Object(a.a)("invoice/save",t).then(function(t){e.dialogInvoice=!1,e.getList()}).catch(function(){}):e.R("请将信息填写完整！")},d:function(e){this.item=e,this.dialogDetail=!0},invoice:function(e){var t=this;t.item=e,t.invoiceInfo.rid=e.id,t.invoiceInfo.ordernumber=e.orderNumbers,t.invoiceInfo.money=e.money,t.dialogInvoice=!0},getList:function(e){var t=this;e&&(t.listQuery.page=1,t.listQuery.offset=0),t.listQuery.offset=(t.listQuery.page-1)*t.listQuery.limit,Object(a.a)("recharge/log/my",t.listQuery).then(function(e){t.lists=e.rows,t.total=e.total}).catch(function(){})}}}),l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pay-list bgw p2"},[i("div",{staticClass:"query"},[i("el-button-group",[i("el-button",{staticClass:"tc-btn",attrs:{size:"small",autofocus:""},on:{click:function(t){return e.btnTime("today")}}},[e._v("今 日")]),e._v(" "),i("el-button",{staticClass:"tc-btn",attrs:{size:"small"},on:{click:function(t){return e.btnTime("week")}}},[e._v("近7日")]),e._v(" "),i("el-button",{staticClass:"tc-btn",attrs:{size:"small"},on:{click:function(t){return e.btnTime("month")}}},[e._v("近30日")]),e._v(" "),i("el-date-picker",{staticClass:"el-button el-button--default",attrs:{"popper-class":"veesing-date-picker",editable:!1,clearable:!1,size:"small",type:"datetimerange",format:"yyyy/MM/dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"picker-options":e.pickerOptions},on:{change:function(t){return e.createTime()}},model:{value:e.datePickerVal,callback:function(t){e.datePickerVal=t},expression:"datePickerVal"}})],1)],1),e._v(" "),i("el-table",{attrs:{data:e.lists}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left"}},[i("el-form-item",{attrs:{label:"充值产品"}},[i("p",{staticClass:"spanBlock",staticStyle:{"padding-left":"70px"},domProps:{innerHTML:e._s(t.row.record)}})]),e._v(" "),t.row.remark?i("el-form-item",{attrs:{label:"备注"}},[i("p",{staticClass:"spanBlock",staticStyle:{"padding-left":"70px"},domProps:{textContent:e._s(t.row.remark)}})]):e._e()],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"订单号","min-width":"200px",prop:"orderNumbers"}}),e._v(" "),i("el-table-column",{attrs:{label:"支付信息",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",{staticClass:"color"},[e._v(e._s(t.row.miaoshu)+"("+e._s(t.row.money)+" 元)")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"交易时间","min-width":"200",prop:"createTime"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"交易状态","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.state?i("p",[i("font",{staticClass:"point point-error"},[e._v("支付失败")])],1):e._e(),e._v(" "),1==t.row.state?i("p",[i("font",{staticClass:"point point-success"},[e._v("支付成功")])],1):e._e(),e._v(" "),2==t.row.state?i("p",[i("font",{staticClass:"point point-warning"},[e._v("待支付")])],1):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"operating"},[i("p",[i("a",{on:{click:function(i){return e.d(t.row)}}},[e._v("详情")]),e._v(" "),1===t.row.state&&"1"===t.row.invoiceState?i("a",{on:{click:function(i){return e.invoice(t.row)}}},[e._v("开发票")]):e._e()])])]}}])})],1),e._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-size":e.listQuery.limit,"page-sizes":e.pageSizes,total:e.total,background:"",layout:"total, prev, pager, next, sizes, jumper"},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),e._v(" "),i("transition",{attrs:{name:"dialog-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogDetail,expression:"dialogDetail"}],staticClass:"dialog list-detail"},[i("div",{staticClass:"dialog-body"},[i("div",{staticClass:"dialog-header"},[e._v("\n          详情 "),i("i",{staticClass:"fr iconfont iconsystem-cancel-bold",on:{click:function(t){e.dialogDetail=!1}}})]),e._v(" "),i("div",{staticClass:"dialog-content c p2"},[i("div",{staticClass:"c"},[i("div",[i("span",[e._v("订单号：")]),e._v(" "),i("span",[e._v(e._s(e.item.orderNumbers))])]),e._v(" "),i("div",[i("span",[e._v("充值产品：")]),e._v(" "),i("span",{domProps:{innerHTML:e._s(e.item.record)}})]),e._v(" "),i("div",[i("span",[e._v("支付信息：")]),e._v(" "),i("span",[e._v(e._s(e.item.miaoshu)+"("+e._s(e.item.money)+" 元)")])])]),e._v(" "),i("div",{staticClass:"c"},[i("div",[i("span",[e._v("交易时间：")]),e._v(" "),i("span",[e._v(e._s(e.item.createTime))])]),e._v(" "),i("div",[i("span",[e._v("支付状态：")]),e._v(" "),0==e.item.state?i("span",{staticClass:"error"},[e._v("支付失败")]):e._e(),e._v(" "),1==e.item.state?i("span",{staticClass:"success"},[e._v("支付成功")]):e._e(),e._v(" "),2==e.item.state?i("span",{staticClass:"warning"},[e._v("待支付")]):e._e()]),e._v(" "),e.item.remark?i("div",[i("span",[e._v("备注：")]),e._v(" "),i("span",[e._v(e._s(e.item.remark))])]):e._e()])])])])]),e._v(" "),i("transition",{attrs:{name:"dialog-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogInvoice,expression:"dialogInvoice"}],staticClass:"dialog dialog-invoice"},[i("div",{staticClass:"dialog-body"},[i("div",{staticClass:"dialog-header"},[e._v("\n          开具发票 "),i("i",{staticClass:"fr iconfont iconsystem-cancel-bold",on:{click:function(t){e.dialogInvoice=!1}}})]),e._v(" "),i("div",{staticClass:"dialog-content p2"},[i("div",{staticClass:"c p2"},[i("p",[e._v("订单号: "),i("span",[e._v(e._s(e.item.orderNumbers))])]),e._v(" "),i("p",[e._v("支付信息: "),i("span",[e._v(e._s(e.item.miaoshu)+"("+e._s(e.item.money)+" 元)")])]),e._v(" "),i("p",[e._v("交易时间: "),i("span",[e._v(e._s(e.item.createTime))])]),e._v(" "),i("p",[e._v("交易状态:\n              "),0==e.item.state?i("span",{staticClass:"error"},[e._v("支付失败")]):e._e(),e._v(" "),1==e.item.state?i("span",{staticClass:"success"},[e._v("支付成功")]):e._e(),e._v(" "),2==e.item.state?i("span",{staticClass:"warning"},[e._v("待支付")]):e._e()])]),e._v(" "),i("el-form",{attrs:{"label-position":"right","label-width":"130px"}},[i("el-form-item",{staticClass:"is-required",attrs:{label:"订单号："}},[i("el-input",{attrs:{type:"number",size:"small",disabled:""},model:{value:e.invoiceInfo.ordernumber,callback:function(t){e.$set(e.invoiceInfo,"ordernumber",t)},expression:"invoiceInfo.ordernumber"}})],1),e._v(" "),i("el-form-item",{staticClass:"is-required",attrs:{label:"发票类型："}},[i("el-select",{staticClass:"w100",attrs:{size:"small",placeholder:"请选择发票类型"},model:{value:e.invoiceInfo.type,callback:function(t){e.$set(e.invoiceInfo,"type",t)},expression:"invoiceInfo.type"}},[i("el-option",{attrs:{label:"普通发票",value:2}}),e._v(" "),i("el-option",{attrs:{label:"增值税专用发票",value:1}})],1)],1),e._v(" "),i("el-form-item",{staticClass:"is-required",attrs:{label:"开具金额："}},[i("el-input",{attrs:{type:"number",size:"small",disabled:""},model:{value:e.invoiceInfo.money,callback:function(t){e.$set(e.invoiceInfo,"money",t)},expression:"invoiceInfo.money"}})],1),e._v(" "),i("el-form-item",{staticClass:"is-required",attrs:{label:"发票抬头："}},[i("el-input",{attrs:{size:"small"},model:{value:e.invoiceInfo.rise,callback:function(t){e.$set(e.invoiceInfo,"rise","string"==typeof t?t.trim():t)},expression:"invoiceInfo.rise"}})],1),e._v(" "),i("el-form-item",{staticClass:"is-required",attrs:{label:"公司地址："}},[i("el-input",{attrs:{size:"small"},model:{value:e.invoiceInfo.address,callback:function(t){e.$set(e.invoiceInfo,"address","string"==typeof t?t.trim():t)},expression:"invoiceInfo.address"}})],1),e._v(" "),i("el-form-item",{staticClass:"is-required",attrs:{label:"公司电话："}},[i("el-input",{attrs:{size:"small"},model:{value:e.invoiceInfo.telphone,callback:function(t){e.$set(e.invoiceInfo,"telphone","string"==typeof t?t.trim():t)},expression:"invoiceInfo.telphone"}})],1),e._v(" "),i("el-form-item",{class:{"is-required":1==e.invoiceInfo.type},attrs:{label:"企业开户行："}},[i("el-input",{attrs:{size:"small"},model:{value:e.invoiceInfo.openbank,callback:function(t){e.$set(e.invoiceInfo,"openbank","string"==typeof t?t.trim():t)},expression:"invoiceInfo.openbank"}})],1),e._v(" "),i("el-form-item",{class:{"is-required":1==e.invoiceInfo.type},attrs:{label:"纳税人识别号："}},[i("el-input",{attrs:{size:"small"},model:{value:e.invoiceInfo.renumber,callback:function(t){e.$set(e.invoiceInfo,"renumber","string"==typeof t?t.trim():t)},expression:"invoiceInfo.renumber"}})],1),e._v(" "),i("el-form-item",{class:{"is-required":1==e.invoiceInfo.type},attrs:{label:"企业账号："}},[i("el-input",{attrs:{size:"small"},model:{value:e.invoiceInfo.account,callback:function(t){e.$set(e.invoiceInfo,"account","string"==typeof t?t.trim():t)},expression:"invoiceInfo.account"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer c p2"},[i("div",{staticClass:"fr"},[i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交审核")]),e._v(" "),i("el-button",{on:{click:function(t){e.dialogInvoice=!1}}},[e._v("取 消")])],1)])])])])],1)},staticRenderFns:[]},r=i("VU/8")(o,l,!1,null,null,null);t.default=r.exports}});